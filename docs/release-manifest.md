# Release Manifest

## Version source of truth

`package.json` → `version` field is canonical. Everything else derives from it.

## Tag format

`vX.Y.Z` — e.g., `v0.1.2`. Tags must match the `package.json` version exactly.

## Pre-release checks

Run `node scripts/require-clean-version.mjs` before tagging. It verifies:

1. Working tree is clean (no uncommitted changes)
2. Git tag `vX.Y.Z` does not already exist
3. `CHANGELOG.md` has an entry for the version with a date

## Required artifacts per release

| Artifact | Source | Notes |
|----------|--------|-------|
| npm tarball | `pnpm pack` | ESM + CJS dual build via tsup |
| `checksums.txt` | SHA-256 of tarball | Generated by release workflow |
| GitHub Release | Auto-created by `release.yml` | Tarball + checksums attached |

## Release flow

1. Update `version` in `package.json`
2. Move `[Unreleased]` CHANGELOG entries under `[X.Y.Z] — YYYY-MM-DD`
3. Commit: `release: vX.Y.Z`
4. Tag: `git tag vX.Y.Z`
5. Push: `git push origin main --tags`
6. CI runs `release.yml` → builds, tests, creates GitHub Release, publishes to npm

See also: `RELEASE.md` (quick-reference), `CONTRIBUTING.md` (PR guidelines).
